{% extends 'base.html' %}
{% load static %}
{% block title %}| Code envoyé{% endblock %}
{% block meta %}
<meta name="robots" content="index, nofollow">
<meta name="description" content="Code envoyé. Veuillez entrer le code reçu par e-mail.">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@RoyalComputerStore">
<meta name="twitter:title" content="Code envoyé">
<meta name="twitter:description" content="Code envoyé. Veuillez entrer le code reçu par e-mail.">
<meta name="twitter:image" content="{% static 'images/rc-logo.png' %}">

<!-- Facebook (Open Graph) -->
<meta property="og:title" content="Code envoyé">
<meta property="og:description" content="Code envoyé. Veuillez entrer le code reçu par e-mail.">
<meta property="og:image" content="{% static 'images/rc-logo.png' %}">  
{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6 my-5">
            <div class="card rounded-5">
                <div class="card-body">
                    <h2 class="card-title text-center mb-4">Code envoyé</h2>
                    <div class="underline mx-auto mb-5"></div>
                    <p class="text-center mb-4">Veuillez entrer le code reçu par e-mail.</p>
                    <form method="post" id="otp-form">
                        {% csrf_token %}
                        <div class="d-flex justify-content-between">
                            {% for i in "12345" %}
                            <input 
                                type="text" 
                                maxlength="1" 
                                class="otp-input form-control text-center shadow-none rounded-5 mx-1" 
                                name="otp_code_{{ forloop.counter }}" 
                                id="otp-{{ forloop.counter }}"
                                required
                                pattern="[0-9]">
                            {% endfor %}
                        </div>
                        <div class="d-grid mt-4">
                            <button type="submit" class="btn btn-primary rounded-5 shadow-none w-100">
                                <i class="fa-solid fa-paper-plane me-2"></i>
                                Envoyer le code
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // JavaScript pour la logique du curseur
    document.addEventListener('DOMContentLoaded', () => {
        const inputs = document.querySelectorAll('.otp-input');
        inputs.forEach((input, index) => {
            input.addEventListener('input', () => {
                if (input.value.length === 1 && index < inputs.length - 1) {
                    inputs[index + 1].focus(); // Passer au suivant
                }
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && input.value === '' && index > 0) {
                    inputs[index - 1].focus(); // Revenir au précédent
                }
            });
        });
    });
</script>
<style>
    .otp-input {
        width: 50px;
        height: 50px;
        font-size: 1.5rem;
        margin: 0 5px;
        border: 1px solid #ccc;
    }

    .otp-input:focus {
        border-color: #007bff;
        box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }
</style>
{% endblock %}
